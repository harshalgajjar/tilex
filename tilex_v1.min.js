// (c) 2020 Harshal Gajjar (www.harshalgajjar.com)
// Tilex v1.0
// (tilex_v1.min.js) Available under MIT License

function tilexContract(e){var t=document.getElementsByClassName("tilex-tile-current")[0],i=t.getBoundingClientRect(),l=i.top,n=i.left,s=(t.getElementsByClassName("tilex-large-content")[0],getComputedStyle(t)),a=document.getElementById("tilex-expanded-tile"),d=a.getElementsByClassName("tilex-small")[0],o=a.getElementsByClassName("tilex-large")[0],m=(o.getElementsByClassName("tilex-large-content")[0],a.getElementsByClassName("tilex-close-button")[0]);$(o).animate({opacity:0},tilexSpeed/4,function(){$(d).animate({opacity:1},tilexSpeed/4)}),$(m).animate({opacity:0},tilexSpeed),t.style.opacity=1,$(a).animate({top:l+"px",left:n+"px",borderRadius:s["border-bottom-left-radius"],height:t.offsetHeight+"px",width:t.offsetWidth+"px"},tilexSpeed),setTimeout(function(){a.remove()},tilexSpeed),t.classList.remove("tilex-tile-current")}function tilexExpand(e){e.classList.add("tilex-tile-current");var t=document.createElement("div"),i=e.getBoundingClientRect(),l=i.top,n=i.left;t.innerHTML=e.innerHTML,t.classList.add("tilex-tile"),t.classList.add("tilex-full-tile");var s=getComputedStyle(e);t.style.borderRadius=s["border-bottom-left-radius"],t.style.textAlign=s["text-align"];for(var a=0;a<e.classList.length;a++)e.classList[a].includes("tilex-shared")&&t.classList.add(e.classList[a]);t.style.top=l+"px",t.style.left=n+"px",t.style.minWidth=e.offsetWidth,t.style.minHeight=e.offsetHeight,t.id="tilex-expanded-tile",document.body.appendChild(t),e.style.opacity="0";var d=t.getElementsByClassName("tilex-close-button")[0];d.addEventListener("click",function(){tilexContract(d.parentElement)});var o=t.getElementsByClassName("tilex-small")[0],m=t.getElementsByClassName("tilex-large")[0],x=m.getElementsByClassName("tilex-large-content")[0];x.style.padding=d.offsetWidth+20+"px",m.style.width="100vw",m.style.display="inline",d.style.display="block",$(t).animate({top:"0px",left:"0px",right:"0px",borderRadius:"0px",height:"100vh"},tilexSpeed),$(d).animate({opacity:1},tilexSpeed),x.offsetHeight>window.innerHeight&&(x.style.maxHeight=window.innerHeight+"px"),x.style.display="block",$(o).animate({opacity:0},tilexSpeed/2,function(){$(m).animate({opacity:1},tilexSpeed/2)}),tilexLiveElem=e}function initTilex(e=400){tilexTiles=document.getElementsByClassName("tilex-tile");for(var t=0;t<tilexTiles.length;t++)tilexTiles[t].addEventListener("click",function(){tilexExpand(this)});var i=document.getElementsByTagName("style")[0],l=document.getElementsByClassName("tilex-tile")[0];null==i?((i=document.createElement("style")).innerHTML=".tilex-full-tile{ min-height: "+l.offsetHeight+"px; min-width: "+l.offsetWidth+"px;}",document.body.appendChild(i)):i.innerHTML=i.innerHTML+" .tilex-full-tile{ min-height: "+l.offsetHeight+"px; min-width: "+l.offsetWidth+"px;}";window.tilexSpeed=e,window.tilexLiveElem=null}$(document).keyup(function(e){"Escape"===e.key&&null!=tilexLiveElem&&(tilexContract(tilexLiveElem),tilexLiveElem=null)});
